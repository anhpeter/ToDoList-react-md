(this.webpackJsonpto_do_list=this.webpackJsonpto_do_list||[]).push([[0],{39:function(t,e,a){},40:function(t,e,a){},63:function(t,e,a){"use strict";a.r(e);var s=a(0),n=a(1),r=a.n(n),i=a(29),c=a.n(i),o=(a(39),function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,64)).then((function(e){var a=e.getCLS,s=e.getFID,n=e.getFCP,r=e.getLCP,i=e.getTTFB;a(t),s(t),n(t),r(t),i(t)}))}),l=a(9),u=a(2),d=a(3),h=a(11),j=a(7),b=a(6),m=a(8),p=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(t){var s;return Object(u.a)(this,a),(s=e.call(this,t)).onSearchChange=function(t){clearTimeout(s.state.searchTimeout);var e=t.target.value,a=Object(m.a)({},s.state.toolbarParams);a.search=e,s.setState({toolbarParams:a},(function(){s.props.onToolbarParamsChange(s.state.toolbarParams)}))},s.onFilterChange=function(t){clearTimeout(s.state.searchTimeout);var e=t.target.value,a=Object(m.a)({},s.state.toolbarParams);a.filter.status=e,s.setState({toolbarParams:a},(function(){s.props.onToolbarParamsChange(s.state.toolbarParams)}))},s.onSortChange=function(t){},s.state={toolbarParams:s.getEmptyParams(),searchTimeout:null},s}return Object(d.a)(a,[{key:"getEmptyParams",value:function(){return{search:"",sort:{},filter:{status:"all"}}}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"toolbar-wrapper row",children:[Object(s.jsx)("div",{className:"col-12 my-1",children:Object(s.jsxs)("button",{className:"btn btn-dark btn-sm",disabled:this.props.isFormOpening,onClick:this.props.onAddTaskClick,children:[Object(s.jsx)("span",{className:"fal fa-plus"}),Object(s.jsx)("span",{children:" Add task "})]})}),Object(s.jsx)("div",{className:"col-lg-6 my-1",children:Object(s.jsxs)("div",{className:"input-group",children:[Object(s.jsx)("input",{type:"text",className:"form-control",value:this.state.toolbarParams.search,onChange:this.onSearchChange,placeholder:"Type key word ..."}),Object(s.jsx)("div",{className:"input-group-append",children:Object(s.jsx)("button",{className:"btn btn-primary",children:Object(s.jsx)("span",{className:"fal fa-search"})})})]})}),Object(s.jsx)("div",{className:"col-lg-6 my-1",children:Object(s.jsx)("div",{className:"row",children:Object(s.jsx)("div",{className:"col-6",children:Object(s.jsxs)("select",{className:"form-control",name:"status",value:this.state.toolbarParams.filter.status,onChange:this.onFilterChange,children:[Object(s.jsx)("option",{value:"all",children:"All status"}),Object(s.jsx)("option",{value:"active",children:"Active"}),Object(s.jsx)("option",{value:"hidden",children:"Hidden"})]})})})})]})}}]),a}(n.Component),k=(a(40),function(){function t(){Object(u.a)(this,t)}return Object(d.a)(t,null,[{key:"getTemplate",value:function(){return{button:{status:{active:{classes:"badge badge-info",content:"Active"},hidden:{classes:"badge badge-light",content:"Hidden"}}}}}},{key:"sayHello",value:function(){alert("hello")}},{key:"generateId",value:function(){var t=1e8;return Math.floor(899999999*Math.random()+t)+""}}]),t}()),f=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(t){var s;return Object(u.a)(this,a),(s=e.call(this,t)).getTaskTitle=function(){var t=s.props.task.title,e=s.props.searchContent;return e&&(t=t.replace(new RegExp("(".concat(e,")"),"g"),'<span style="background: yellow;">$1</span>')),t},s.state={task:t.task},s}return Object(d.a)(a,[{key:"getStatusTemplate",value:function(){return k.getTemplate().button.status[this.state.task.status]}},{key:"render",value:function(){var t=this;return Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{scope:"row",children:this.props.no}),Object(s.jsx)("td",{dangerouslySetInnerHTML:{__html:this.getTaskTitle()}}),Object(s.jsx)("td",{children:Object(s.jsx)("span",{onClick:function(){t.props.onTaskStatusChange(t.state.task)},className:"btn-status ".concat(this.getStatusTemplate().classes),children:this.getStatusTemplate().content})}),Object(s.jsx)("td",{children:Object(s.jsxs)("div",{className:"d-flex",children:[Object(s.jsx)("button",{className:"btn btn-success w-100 mx-1  btn-sm",onClick:function(){t.props.onEditTaskClick(t.state.task)},children:Object(s.jsx)("span",{className:"fal fa-pencil"})}),Object(s.jsx)("button",{className:"btn btn-danger w-100 mx-1  btn-sm",onClick:function(){t.props.onDeleteTaskClick(t.state.task)},children:Object(s.jsx)("span",{className:"fal fa-trash-alt"})})]})})]})}}]),a}(n.Component),O=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(d.a)(a,[{key:"getTaskArrHtml",value:function(){var t=this;return this.props.taskArr.map((function(e,a){return Object(s.jsx)(f,{no:a+1,task:e,onDeleteTaskClick:t.props.onDeleteTaskClick,onEditTaskClick:t.props.onEditTaskClick,searchContent:t.props.toolbarParams.search,onTaskStatusChange:t.props.onTaskStatusChange},e.id)}))}},{key:"getEmptyMsg",value:function(){return Object(s.jsx)("tr",{children:Object(s.jsx)("td",{colSpan:"1000",children:Object(s.jsx)("div",{className:"alert alert-info text-center",children:" You do not have any task, yet! "})})})}},{key:"render",value:function(){var t;return Object(s.jsx)("div",{className:"task-list-wrapper",children:Object(s.jsxs)("table",{className:"table table-striped",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"#"}),Object(s.jsx)("th",{children:"Title"}),Object(s.jsx)("th",{children:"Status"}),Object(s.jsx)("th",{className:"text-center",width:"30%",children:"Action"})]})}),Object(s.jsx)("tbody",{children:(null===(t=this.props.taskArr)||void 0===t?void 0:t.length)>0?this.getTaskArrHtml():this.getEmptyMsg()})]})})}}]),a}(n.Component),g=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(t){var s;return Object(u.a)(this,a),(s=e.call(this,t)).getFormValues=function(){return"edit"===s.state.formType?s.state.task:s.getEmptyForm()},s.onInputChange=function(t){var e=t.target.name,a=t.target.value,n=Object(m.a)({},s.state.form);n[e]=a,s.setState({form:n})},s.onSubmit=function(t){if(t.preventDefault(),s.isFormValid())if("add"===s.state.formType){var e=s.state.form;e.id=k.generateId(),s.props.onAddTask(e)}else s.props.onEditTask(s.state.form);"add"===s.state.formType&&s.setState({form:s.getEmptyForm()})},s.state={task:s.props.task,formType:t.task?"edit":"add",form:{}},s.state.form=s.getFormValues(),s}return Object(d.a)(a,[{key:"getEmptyForm",value:function(){return{id:"",title:"",status:""}}},{key:"isFormValid",value:function(){try{var t=this.state.form;return""!==t.title.trim()&&["active","hidden"].includes(t.status)}catch(e){return!0}}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"form-wrapper",children:[Object(s.jsx)("p",{className:"bg-info text-light p-2 rounded",children:"edit"===this.state.formType?"Edit task":"Add task"}),Object(s.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)("input",{type:"text",className:"form-control",name:"title",placeholder:"Title",value:this.state.form.title,onChange:this.onInputChange})}),Object(s.jsx)("div",{className:"form-group",children:Object(s.jsxs)("select",{className:"form-control",name:"status",value:this.state.form.status,onChange:this.onInputChange,children:[Object(s.jsx)("option",{value:"",disabled:!0,children:"Choose status"}),Object(s.jsx)("option",{value:"active",children:"Active"}),Object(s.jsx)("option",{value:"hidden",children:"Hidden"})]})}),Object(s.jsx)("div",{className:"form-group text-right",children:Object(s.jsxs)("div",{className:"btn-group btn-group-sm",children:[Object(s.jsx)("button",{className:"btn btn-primary",disabled:!this.isFormValid(),children:"edit"===this.state.formType?"Save":"Add"}),Object(s.jsx)("button",{className:"btn btn-warning ml-1",onClick:this.props.onFormCancelClick,children:"Cancel"})]})})]})]})}}]),a}(n.Component),v=a(14),x=a.n(v),T=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){x.a.get("http://localhost:3000/api/posts").then((function(t){console.log(t.data)})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return Object(s.jsx)("div",{className:"title-wrapper row",children:Object(s.jsx)("div",{className:"col-12",children:Object(s.jsx)("h3",{className:"text-center",children:this.props.title})})})}}]),a}(n.Component),y=a(15),C=a.n(y),A=a(33),N=a(30),S={user:{username:"peteranh",password:"123456"}};var F=Object(N.a)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,e=arguments.length>1?arguments[1]:void 0,a=Object(m.a)({},t);switch(e.type){case"change-user":a.user=e.user}return a}));F.subscribe((function(){console.log(F.getState())})),console.log("default",F.getState());F.dispatch({type:"change-user",user:{username:"hongtruc",password:"abcdef"}}),console.log("new",F.getState());var P=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(t){var s;Object(u.a)(this,a),(s=e.call(this,t)).getDisplayTaskArr=function(t){var e=s.state.toolbarParams;return""===e.search.trim()&&"all"===e.filter.status||(t=t.filter((function(t){return t.title.indexOf(e.search)>=0&&(t.status===e.filter.status||"all"===e.filter.status)}))),t},s.setDisplayTaskArr=function(){s.setState({displayTaskArr:s.getDisplayTaskArr(s.state.taskArr)})},s.onTaskStatusChange=function(t){var e=s.getTaskIndex(t),a=Object(l.a)(s.state.taskArr);t.status="active"===t.status?"hidden":"active",a[e]=t,s.setState({taskArr:a},(function(){s.saveList()}))},s.printList=function(){},s.saveList=function(){C.a.set("taskArr",JSON.stringify(s.state.taskArr))},s.onAddTaskCLick=function(){s.setState({isFormOpening:!0})},s.onEditTaskClick=function(t){s.setState({isFormOpening:!0,task:t})},s.onDeleteTaskClick=function(t){var e,a=Object(l.a)(s.state.taskArr),n=s.getTaskIndex(t);a.splice(n,1),s.setState({taskArr:a},(function(){s.saveList(),s.setDisplayTaskArr()})),s.state.isFormOpening&&(null===(e=s.state.task)||void 0===e?void 0:e.id)===t.id&&s.setState({isFormOpening:!1,task:null})},s.onFormCancelClick=function(){s.setState({isFormOpening:!1,task:null})},s.getTaskIndex=function(t){return Object(l.a)(s.state.taskArr).findIndex((function(e){return e.id===t.id}))},s.onAddTask=function(t){var e=Object(l.a)(s.state.taskArr);e.unshift(t),s.setState({taskArr:e},(function(){s.saveList(),s.setDisplayTaskArr()}))},s.onEditTask=function(t){var e=Object(l.a)(s.state.taskArr),a=e.findIndex((function(e){return e.id===t.id}));e.splice(a,1,t),s.setState({taskArr:e},(function(){s.saveList(),s.setDisplayTaskArr()}))},s.onToolbarParamsChange=function(t){s.setState({toolbarParams:t},(function(){s.setDisplayTaskArr()}))};var n=Object(h.a)(s);return s.state={isFormOpening:!1,task:null,taskArr:s.getList(),get displayTaskArr(){return n.getDisplayTaskArr(Object(l.a)(this.taskArr))},toolbarParams:{sort:{},search:"",filter:{status:"all"}}},s}return Object(d.a)(a,[{key:"getList",value:function(){var t=[],e=C.a.get("taskArr");if(e)try{t=JSON.parse(e)||[]}catch(a){}return t}},{key:"render",value:function(){var t;return Object(s.jsx)(A.a,{children:Object(s.jsx)("div",{className:"mai-wrapper",children:Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("div",{className:"my-4",children:Object(s.jsx)(T,{title:"My task (ReactJS)"})}),Object(s.jsx)("div",{children:Object(s.jsx)(p,{isFormOpening:this.state.isFormOpening,onAddTaskClick:this.onAddTaskCLick,onToolbarParamsChange:this.onToolbarParamsChange})}),Object(s.jsx)("div",{className:"my-3",children:Object(s.jsxs)("div",{className:"row",children:[this.state.isFormOpening?Object(s.jsx)("div",{className:"col-lg-4",children:Object(s.jsx)(g,{onFormCancelClick:this.onFormCancelClick,onAddTask:this.onAddTask,onEditTask:this.onEditTask,task:this.state.task},null===(t=this.state.task)||void 0===t?void 0:t.id)}):"",Object(s.jsx)("div",{className:this.state.isFormOpening?"col-lg-8":"col-lg-12",children:Object(s.jsx)(O,{taskArr:this.state.displayTaskArr,toolbarParams:this.state.toolbarParams,onDeleteTaskClick:this.onDeleteTaskClick,onEditTaskClick:this.onEditTaskClick,onTaskStatusChange:this.onTaskStatusChange})})]})})]})})})}}]),a}(r.a.Component);c.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(P,{})}),document.getElementById("root")),o()}},[[63,1,2]]]);
//# sourceMappingURL=main.ef45ba91.chunk.js.map